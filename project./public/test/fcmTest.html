<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="theme-color" content="#000000">
	<link rel="manifest" href="/manifest.json">
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="stylesheet" href="/css/bootstrap.min.css">
	<title>React App</title>
</head>
<body>
<button onclick="requestAlarm();">알림요청버튼</button>
<button onclick="checkToken();">토큰확인</button>
<br>
<span id="result"></span>

<script type="text/javascript" src="/js/jquery-1.12.4.min.js"></script>
<script src="/__/firebase/4.9.0/firebase.js"></script>
<script src="/__/firebase/4.6.2/firebase-app.js"></script>
<script src="/__/firebase/4.6.2/firebase-messaging.js"></script>
<script src="/__/firebase/init.js"></script>

<script>
	const messaging = firebase.messaging();
	requestAlarm = function () {
		messaging.requestPermission()
				.then(function () {
					console.log('요청완료됨');
				})
				.catch(function (err) {
					console.log('요청거부됨', err);
				});
	};
	checkToken = function () {
		messaging.getToken()
				.then(function (currentToken) {
					if (currentToken) {
						$("#result").html(currentToken);
					} else {
						$("#result").html("No Instance ID token available. Request permission to generate one.");
					}
				})
				.catch(function (err) {
					$("#result").html('An error occurred while retrieving token. ' + err.toString());
				});
	}
</script>
</body> 
</html>
